# Global Skills — Правила для всех проектов

> Этот файл применяется ко ВСЕЙ деятельности. Наследуется каждым проектом.
> Скопируй в `~/.claude/global.skills.md`

---

## Архитектурные принципы

### 1. SaaS by Default
Все приложения изначально строятся под multi-user:
- Auth с первого дня (Clerk/Auth.js)
- userId во всех моделях БД
- Никаких хардкодов "для себя" — всё через user context
- Переделывать потом = двойная работа

### 2. Минимализм кода
- Не добавлять фичи "на будущее"
- Не абстрагировать до третьего использования
- Удалять мёртвый код сразу
- Простое решение > умное решение

### 3. Типизация
- TypeScript strict mode
- Никаких `any` без крайней необходимости
- Prisma для БД = типы из схемы

---

## UX-философия

### 4. Не создавать преграды пользователю

Краткая суть:
- Юзер приходит решать СВОЮ задачу, не настраивать систему
- Никаких "заполни системный промпт перед началом"
- Мягкий онбординг — система учится в процессе
- Умные дефолты > бесконечные настройки
- Спрашивать только когда реально нужно, запоминать ответ

### 5. Белый лист по умолчанию
- UI = минимум элементов
- Информация появляется когда нужна
- Не перегружать когнитивно

---

## Рабочие процессы

### 6. Документирование идей
При обсуждении продукта/фичи — записывать "закиды" в:
```
PROJECT/.claude/project.skills.md
```
Это живой документ философии проекта, не формальный PRD.

### 7. Структура проекта
```
PROJECT/
├── CLAUDE.md              # Навигация для агента (куда идти)
├── PRD.md                 # Выжимка продукта (что делаем)
├── .claude/
│   ├── project.skills.md  # Философия + специфика проекта
│   └── settings.local.json
└── docs/
    └── ...
```

### 8. Коммиты
- Короткие, по делу
- Формат: "Глагол + что сделано"

### 9. Проверка перед отдачей
**ОБЯЗАТЕЛЬНО:** Перед тем как сказать "готово" — проверь что работает:
- После деплоя — дождись завершения, проверь URL
- После миграции БД — убедись что таблица создана
- После создания страницы — проверь что открывается
- Если нужен `prisma db push` — запусти сам, не перекладывай на юзера
- Не отдавать "инструкции для деплоя" — делай сам до конца

### 10. Оптимизация роутов в CLAUDE.md
**Цель:** Экономия токенов Claude Code.

**Обязательная структура CLAUDE.md:**
```markdown
## Роутинг задач (СМОТРИ СЮДА ПЕРВЫМ)
| Тип задачи | Куда идти | Строки/Детали |
```

**Правила индексации:**
- Все файлы >200 строк — индексировать функции с номерами строк
- Указывать размер файла в скобках: `actions.ts (804)`
- Маленькие файлы (<50 строк) помечать как "маленький, можно читать целиком"
- Главные функции выделять **жирным**

**При работе над проектом:**
1. Перед чтением файла — смотри CLAUDE.md
2. Читай только нужную функцию по номеру строки
3. Если индекса нет — создай его
4. После рефакторинга — обнови номера строк

**Пример хорошего индекса:**
```markdown
| `sendDraftMessage` | 258 | AI чат — отправка |
| `runAgent` | 289 | **Главная** — запуск агента |
```

### 11. Чистота кода — всегда
**Принцип:** Не срать всю разработку, чтобы потом убираться. Чистить по ходу.

**Правила:**
- Удалять неиспользуемый код сразу, не комментировать "на потом"
- Убирать console.log после дебага
- Не плодить файлы .backup, .old, .copy
- Один файл = одна ответственность
- Если файл >500 строк — подумай о разбиении
- Пустые файлы, мёртвые импорты — удалять

**При завершении задачи:**
1. Проверь что не оставил мусор
2. Удали временные файлы
3. Почисти закомментированный код

**Директория проекта = чистый стол:**
- Корень не захламлять
- Логические папки: src/, scripts/, docs/, core/
- README/CLAUDE.md всегда актуальны

---

## Стек по умолчанию

| Слой | Технология |
|------|------------|
| Frontend | Next.js 14+ (App Router) |
| Styling | Tailwind CSS |
| Auth | Clerk |
| DB | PostgreSQL + Prisma |
| Deploy | Railway / Vercel |
| AI | OpenAI API |

---

*Адаптируй под свои нужды и стек.*
